digraph Extended_DAG {
    rankdir=LR;
    graph [bgcolor="transparent" splines=true overlap=false]
    node [fontname="Arial", fontsize=11, style=filled]
    edge [arrowsize=0.9]

    // Задачи (левая часть)
    subgraph cluster_tasks {
        label = "Задачи";
        style = dashed;
        color = gray50;

        v1 [label=<<b>A</b><br/><font point-size="9">T=40 V=8</font>>,
            fillcolor="#e6f3ff", shape=box]
        v2 [label=<<b>B</b><br/><font point-size="9">T=60 V=12</font>>,
            fillcolor="#e6f3ff", shape=box]
        v3 [label=<<b>C</b><br/><font point-size="9">T=25 V=6</font>>,
            fillcolor="#e6f3ff", shape=box]
        v4 [label=<<b>D</b><br/><font point-size="9">T=90 V=18</font>>,
            fillcolor="#e6f3ff", shape=box]

        v1 -> v3;
        v2 -> v3;
        v2 -> v4;
        v3 -> v4  [style=dashed, color=gray60];
    }

    // Виртуальные машины (правая часть)
    subgraph cluster_machines {
        label = "Виртуальные машины";
        style = dashed;
        color = gray50;

        u1 [label=<<b>VM1</b><br/><font point-size="9">F=10 M=16</font>>,
            fillcolor="#fff0e6", shape=ellipse]
        u2 [label=<<b>VM2</b><br/><font point-size="9">F=15 M=24</font>>,
            fillcolor="#fff0e6", shape=ellipse]
    }

    // Назначения (пунктирные связи)
    v1 -> u1  [style=dashed, color="#d95f02", constraint=false, arrowhead=normal]
    v2 -> u1  [style=dashed, color="#d95f02", constraint=false, arrowhead=normal]
    v3 -> u2  [style=dashed, color="#1b9e77", constraint=false, arrowhead=normal]
    v4 -> u2  [style=dashed, color="#1b9e77", constraint=false, arrowhead=normal]

    // Легенда-подсказка
    {rank = same; v1; v2}
    {rank = same; v3}
    {rank = same; v4}
    {rank = same; u1; u2}
}